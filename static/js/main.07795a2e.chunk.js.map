{"version":3,"sources":["panels/Home.js","panels/Intro.js","App.js","index.js"],"names":["Home","id","snackbarError","useState","value1","setValue1","value2","setValue2","result","setResult","value","onChange","event","target","type","onClick","Intro","fetchedUser","go","userHasSeenIntro","centered","className","photo_200","src","first_name","vertical","mode","size","ROUTES","STORAGE_KEYS","STATUS","STATE","App","activePanel","setActivePanel","setUser","popout","setPopout","fetchedState","setFetchedState","setUserHasSeenIntro","snacbar","setSnackbar","useEffect","a","bridge","send","user","keys","Object","values","storageData","data","forEach","key","JSON","parse","hasSeenIntro","error","layout","onClose","before","duration","subscribe","detail","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","viewIntro","stringify","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.07795a2e.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel'\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader'\n\nconst Home = ({ id, snackbarError }) => {\n  const [value1, setValue1] = useState('')\n  const [value2, setValue2] = useState('')\n  const [result, setResult] = useState('')\n\n  return (\n    <Panel id={id}>\n      <PanelHeader>Калкулятор</PanelHeader>\n      <p>\n        Число1\n        <input\n          value={value1}\n          onChange={(event) => setValue1(event.target.value)}\n        />\n      </p>\n      <p>\n        Число2\n        <input\n          value={value2}\n          onChange={(event) => setValue2(event.target.value)}\n        />\n      </p>\n      <button type=\"button\" onClick={() => setResult(+value1 + +value2)}>\n        Сложить\n      </button>\n      <button type=\"button\" onClick={() => setResult(+value1 - +value2)}>\n        Вычесть\n      </button>\n      <button type=\"button\" onClick={() => setResult(+value1 * +value2)}>\n        Умножить\n      </button>\n      <button type=\"button\" onClick={() => setResult(+value1 / +value2)}>\n        Разделить\n      </button>\n      <hr></hr>\n      <p>Результать: {result}</p>\n      {snackbarError}\n    </Panel>\n  )\n}\n\nexport default Home\n","import React, { Fragment } from 'react'\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel'\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader'\nimport Group from '@vkontakte/vkui/dist/components/Group/Group'\nimport Div from '@vkontakte/vkui/dist/components/Div/Div'\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar'\nimport FixedLayout from '@vkontakte/vkui/dist/components/FixedLayout/FixedLayout'\nimport Button from '@vkontakte/vkui/dist/components/Button/Button'\n\nimport './Intro.css'\n\nconst Intro = ({ id, snackbarError, fetchedUser, go, userHasSeenIntro }) => {\n  return (\n    <Panel id={id} centered={true}>\n      <PanelHeader>Интро Калькулятора</PanelHeader>\n      {fetchedUser && !userHasSeenIntro && (\n        <Fragment>\n          <Group>\n            <Div className=\"User\">\n              {fetchedUser.photo_200 && <Avatar src={fetchedUser.photo_200} />}\n              <h2>Привет, {fetchedUser.first_name}!</h2>\n              <h3>\n                Я постарался написать простой калькулятор, без красивой верстки.\n                Это мое первое приложение на ВК, надеюсь не будете строгими в\n                оценке. Также хочу обратить ваше внимание на факт, что страницу\n                \"Интро\" я переписал у сотрудника ВК, который показал на Ютубе,\n                как создать вк мини апы, я же самостоятельно написал только\n                калькулятор. В дальнейшем обещаю научиться и писать все сам!\n              </h3>\n            </Div>\n          </Group>\n          <FixedLayout vertical=\"bottom\">\n            <Div>\n              <Button mode=\"commerce\" size=\"xl\" onClick={go}>\n                Ok, все понятно!\n              </Button>\n            </Div>\n          </FixedLayout>\n        </Fragment>\n      )}\n      {snackbarError}\n    </Panel>\n  )\n}\n\nexport default Intro\n","import React, { useState, useEffect } from 'react'\nimport bridge from '@vkontakte/vk-bridge'\nimport View from '@vkontakte/vkui/dist/components/View/View'\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner'\nimport SnackBar from '@vkontakte/vkui/dist/components/Snackbar/Snackbar'\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport Home from './panels/Home'\nimport Intro from './panels/Intro'\n\nconst ROUTES = {\n  HOME: 'home',\n  INTRO: 'intro',\n}\n\nconst STORAGE_KEYS = {\n  STATUS: 'status',\n  STATE: 'state',\n}\n\nconst App = () => {\n  const [activePanel, setActivePanel] = useState(ROUTES.INTRO)\n  const [fetchedUser, setUser] = useState(null)\n  const [popout, setPopout] = useState(<ScreenSpinner size=\"large\" />)\n  const [fetchedState, setFetchedState] = useState(false)\n  const [userHasSeenIntro, setUserHasSeenIntro] = useState(false)\n  const [snacbar, setSnackbar] = useState(false)\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme')\n        schemeAttribute.value = data.scheme ? data.scheme : 'client_light'\n        document.body.attributes.setNamedItem(schemeAttribute)\n      }\n    })\n    async function fetchData() {\n      const user = await bridge.send('VKWebAppGetUserInfo')\n      const storageData = await bridge.send('VKWebAppStorageGet', {\n        keys: Object.values(STORAGE_KEYS),\n      })\n      const data = {}\n      storageData.keys.forEach(({ key, value }) => {\n        try {\n          data[key] = value ? JSON.parse(value) : {}\n          switch (key) {\n            case STORAGE_KEYS.STATUS:\n              if (data[key].hasSeenIntro) {\n                setActivePanel(ROUTES.HOME)\n                setUserHasSeenIntro(true)\n              }\n              break\n            case STORAGE_KEYS.STATE:\n              setFetchedState(data[key])\n              break\n            default:\n              break\n          }\n        } catch (error) {\n          setSnackbar(\n            <SnackBar\n              layout=\"vertical\"\n              onClose={() => {\n                setSnackbar(null)\n              }}\n              before={<Avatar size={24} />}\n              duration={900}\n            >\n              Возникли проблемы при получении данных из Storage\n            </SnackBar>\n          )\n        }\n      })\n      setUser(user)\n      setPopout(null)\n    }\n    fetchData()\n  }, [])\n\n  const go = (panel) => {\n    setActivePanel(panel)\n  }\n\n  const viewIntro = async function () {\n    try {\n      await bridge.send('VKWebAppStorageSet', {\n        key: STORAGE_KEYS.STATUS,\n        value: JSON.stringify({\n          hasSeenIntro: true,\n        }),\n      })\n      go(ROUTES.HOME)\n    } catch (error) {\n      setSnackbar(\n        <SnackBar\n          layout=\"vertical\"\n          onClose={() => {\n            setSnackbar(null)\n          }}\n          before={<Avatar size={24} />}\n          duration={900}\n        >\n          Возникли проблемы при отправке данных из Storage\n        </SnackBar>\n      )\n    }\n  }\n\n  return (\n    <View activePanel={activePanel} popout={popout}>\n      <Home\n        id={ROUTES.HOME}\n        fetchedUser={fetchedUser}\n        fetchedState={fetchedState}\n        snackbarError={snacbar}\n      />\n      <Intro\n        id={ROUTES.INTRO}\n        fetchedUser={fetchedUser}\n        userHasSeenIntro={userHasSeenIntro}\n        go={viewIntro}\n        snackbarError={snacbar}\n      />\n    </View>\n  )\n}\n\nexport default App\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}